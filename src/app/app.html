<div class="app-container">
  <header class="app-header">
    <h1>{{ title() }}</h1>
    <p>A GitHub-like search component with configurable search types and operators.</p>
  </header>

  <main class="app-main">
    @if (searchConfig()) {
      <div class="search-section">
        <h2>Interactive Search</h2>
        <p>Start typing a search type like "branch-name", "iteration", "status", "created-date", or "assignee"</p>
        
        <div class="feature-highlights">
          <div class="highlight">
            <strong>üöÄ NEW:</strong> Raw Query Mode - Switch between visual and text-based search
          </div>
          <div class="highlight">
            <strong>‚å®Ô∏è Keyboard Shortcuts:</strong> <kbd>Ctrl+K</kbd> to focus, <kbd>/</kbd> to search, <kbd>Esc</kbd> to clear/close
          </div>
        </div>
        
        <app-search 
          [config]="searchConfig()!"
          (queryChanged)="onQueryChanged($event)"
          (criteriaChanged)="onCriteriaChanged($event)">
        </app-search>
      </div>

      <div class="features-section">
        <h2>Available Search Types</h2>
        <div class="feature-grid">
          @for (type of searchConfig()!.availableTypes; track type.id) {
            <div class="feature-card">
              <h3>{{ type.label }}</h3>
              @if (type.description) {
                <p class="description">{{ type.description }}</p>
              }
              <div class="operators">
                <strong>Operators:</strong>
                @for (operator of type.supportedOperators; track operator.type; let isLast = $last) {
                  <span class="operator">{{ operator.label }}</span>@if (!isLast) {<span>, </span>}
                }
              </div>
              <div class="value-type">
                <strong>Type:</strong> 
                <span class="type-badge">{{ type.valueType }}</span>
              </div>
            </div>
          }
        </div>
      </div>

      <div class="instructions-section">
        <h2>How to Use</h2>
        <ol>
          <li><strong>Switch Modes:</strong> Toggle between Visual and Raw Query modes using the buttons above the search</li>
          <li><strong>Visual Mode:</strong> Start typing any search type (branch-name, iteration, etc.) and select from dropdown</li>
          <li><strong>Raw Query Mode:</strong> Type queries like <code>branch-name:main iteration:>5 status:Active</code></li>
          <li><strong>Add criteria:</strong> Use the + button or type search types to add criteria</li>
          <li><strong>Edit tags:</strong> Click on any existing tag to modify its operator or value</li>
          <li><strong>Keyboard shortcuts:</strong> 
            <ul>
              <li><kbd>Ctrl+K</kbd> or <kbd>Cmd+K</kbd> - Focus search input</li>
              <li><kbd>/</kbd> - Focus search input (like GitHub)</li>
              <li><kbd>Esc</kbd> - Close modals, clear suggestions, or clear search</li>
            </ul>
          </li>
          <li><strong>Query operators:</strong> Use <code>></code>, <code><</code>, <code>=</code>, <code>!=</code>, <code>~</code> (contains) in raw mode</li>
        </ol>
      </div>
    } @else {
      <div class="loading">Loading search configuration...</div>
    }
  </main>
</div>

<router-outlet />